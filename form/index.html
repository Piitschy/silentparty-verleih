<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="./style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/vanillajs-datepicker@1.2.0/dist/css/datepicker.min.css">
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@kingshott/iodine@8.0.0/dist/iodine.min.umd.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/vanillajs-datepicker@1.2.0/dist/js/datepicker-full.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vanillajs-datepicker@1.2.0/dist/js/locales/de.js"></script>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Silent Party Kopfhöerer Verleih</title>
</head>
<body>
<div class="center">
    <form x-data="orderform" action="#">
        <div class="row">
            <div class="input">
                <label for="vorname">Vorname</label>
                <input id="vorname" type="text" x-model="data.vorname">
                <div x-text="validation.vorname"></div>
            </div>
            <div class="input">
                <label for="nachname">Nachname</label>
                <input id="nachname" type="text" x-model="data.nachname">
            </div>
            
        </div>
        <div class="input">
            <label for="organisation">Organisation</label>
            <input id="organisation" type="text" x-model="data.organisation">
        </div>
        <div class="input">
            <label for="email">Email</label>
            <input id="email" type="text" x-model="data.email">
        </div>

        <div class="row">
            <div class="input">
                <label for="strasse">Straße</label>
                <input id="strasse" type="text" x-model="data.strasse">
            </div>
            <div class="input">
                <label for="nummer">Hausnummer</label>
                <input id="nummer" type="text" x-model="data.hausnummer">
            </div>
            
        </div>

        <div class="row">
            <div class="input">
                <label for="plz">Postleitzahl</label>
                <input id="plz" type="text" x-model="data.postleitzahl">
            </div>
            <div class="input">
                <label for="ort">Ort</label>
                <input id="ort" type="text" x-model="data.ort">
            </div>
            
        </div>
        <div class="datewrapper">
        <label>Event Datum:</label>
        <div id="date" x-data="cal" x-modelable="date" x-model="data.date"></div>
        </div>
        <div class="input">
            <label for="dauer">Eventdauer:</label>
            <input id="dauer" type="number" value="1" x-model="data.dauer">
        </div>
        <div class="input">
            <label for="anzahl">Anzahl Kopfhörer</label>
            <input id="anzahl" type="number" x-model="data.anzahl_kopfhoerer">
        </div>
        <div class="input">
            <label for="kanal">Anzahl kanäle</label>
            <select id="kanal" x-model="data.anzahl_kanaele">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3" selected>3</option>
            </select>
        </div>
        <div class="input">
            <input type="checkbox">
            <label>Ich bin damit einverstaden, dass die angegebenden daten zur verarbeitung meiner Anfrage gespreichert werden</label>
            
        </div>
        <div class="input">
            <input type="checkbox">
            <label>Ich bin damit einverstaden, dass die angegebenden daten zur verarbeitung meiner Anfrage gespreichert werden</label>
        </div>
        <input type="submit">
        <a x-text="JSON.stringify(data)"></a>
    </form>
</div>

    <script>
        document.addEventListener('alpine:init', () => {
            Alpine.data('orderform', () => ({
                data:{
                    vorname:"",
                    nachname:"",
                    organistation:"",
                    
                    strasse:"",
                    hausnummer:"",
                    ort:"",
                    postleitzahl:"",

                    date:"",
                    dauer:1,
                    anzahl_kopfhoerer:20,
                    anzahl_kanaele:3,

                },
                rules:{
                    vorname:['required'],
                    nachname:['required'],
                    organistation:['required'],
                    
                    strasse:['required'],
                    hausnummer:['required'],
                    ort:['required'],
                    postleitzahl:['required'],

                    date:['required'],
                    dauer:['required'],
                    anzahl_kopfhoerer:['required'],
                    anzahl_kanaele:['required'], 
                },
                validation:{},
                init(){
                    validation = Iod
                }
            }));

            Alpine.data("cal", ()=>({
                picker: null,
                update: 0,
                get date(){
                    this.update++;
                    return this.picker.getDate("yyyy-mm-dd");
                },
                set date(date){
                    this.update--;
                    this.picker.setDate(this.date);
                },
                init(){
                    this.picker = new Datepicker(this.$el, {
                        minDate: new Date(),
                        language: 'de'
                    }); 
                    this.$el.addEventListener("changeDate", ()=>{
                        this.update = 0;
                    });
                }

            }));
        })
    </script>
</body>
</html>